"use strict";(self.webpackChunkdeploy=self.webpackChunkdeploy||[]).push([[666],{5666:function(e,t,s){s.r(t),s.d(t,{default:function(){return ce}});var a=s(1413),n=s(5671),o=s(3144),r=s(136),i=s(9388),l=s(2791),u=s(8687),c=s(6070),f=s(4165),p=s(5861),d=s(9439),g="MyPosts_postBlock__EGwzF",m="MyPosts_posts__PPBNw",h="MyPosts_textPost__taStg",v="MyPosts_postForm__1hslB",x="MyPosts_textareaPost__Hh4Xy",P="MyPosts_buttonPost__a1Pka",j="MyPosts_changePhoto__jwFN2",_="MyPosts_postimg__pEr0z",b={item:"Post_item__wvwNZ",message:"Post_message__lj2l1",post:"Post_post__mzyAp"},I=s(276),y=s(673),k=s(184),N=function(e){var t=(0,l.useState)(null),s=(0,d.Z)(t,2),a=s[0],n=s[1];return(0,l.useEffect)((function(){if(e.image){var t=(0,I.iH)(y.t,"posts/"+e.image);(0,I.Jt)(t).then((function(t){n(t),console.log(e.image)}))}}),[]),(0,k.jsxs)("div",{className:b.post,children:[(0,k.jsx)("div",{className:b.nick,children:!!e.nick&&e.nick}),(0,k.jsx)("div",{children:e.createdAt}),(0,k.jsxs)("div",{className:b.item,children:[e.avatar?(0,k.jsx)("img",{alt:"",src:e.avatar}):(0,k.jsx)("img",{alt:"",src:"https://w7.pngwing.com/pngs/911/1005/png-transparent-ninja-computer-icons-avatar-samurai-ninja-cartoon-desktop-wallpaper-mix.png"}),(0,k.jsx)("div",{className:b.message,children:e.message})]}),(0,k.jsx)("img",{style:{height:"300px"},alt:"",src:a})]})},w=s(6139),S=s(704),F=s(5692),Z=s(2781),D=s(9230),M=s(6321),C=(s(2366),s(8190)),L=((0,F.D)(50),l.memo((function(e){e.posts.map((function(e){return(0,k.jsx)(N,{message:e.message,likesCount:e.likesCount},e.id)}));var t=(0,l.useContext)(C.I),s=t.posts,a=(t.setPosts,t.myId),n=(0,l.useState)(""),o=(0,d.Z)(n,2),r=o[0],i=o[1],u=(0,D.$G)(),c=u.t,f=u.i18n;(0,l.useEffect)((function(){var e=localStorage.getItem("lg");f.changeLanguage(e),s.filter((function(e){console.log(null===e||void 0===e?void 0:e.image)}))}),[s]);navigator.language;return(0,k.jsxs)("div",{className:g,children:[(0,k.jsx)("h3",{className:h,children:c("myPosts.createPost")}),(0,k.jsx)(A,{id:a,value:r,setValue:i}),!!s&&(0,k.jsx)("div",{className:m,children:s.map((function(e){return(0,k.jsx)(N,{message:e.message,createdAt:null===e||void 0===e?void 0:e.createdAt,nick:null===e||void 0===e?void 0:e.nick,avatar:null===e||void 0===e?void 0:e.avatar,image:null===e||void 0===e?void 0:e.image,likesCount:"100"},e.userId)}))})]})}))),A=function(e){var t=e.id,s=e.value,a=e.setValue,n=(0,D.$G)(),o=n.t,r=n.i18n,i=(0,l.useState)(null),u=(0,d.Z)(i,2),c=u[0],g=u[1],m=(0,l.useContext)(C.I),h=m.photo,b=m.nick;(0,l.useEffect)((function(){var e=navigator.language;r.changeLanguage(e)}),[]);navigator.language;var N=function(){var e=(0,p.Z)((0,f.Z)().mark((function e(){var n,o,r,i;return(0,f.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=(new Date).toString()+"post",e.next=4,fetch(c);case 4:return o=e.sent,e.next=7,o.blob();case 7:r=e.sent,i=(0,I.iH)(y.t,"posts/"+n),(0,I.KV)(i,r).then((function(){(0,M.ET)((0,M.hJ)(y.F,"posts"),{nick:b,avatar:h,userId:t,message:s,createdAt:(new Date).toLocaleString(),image:n})})),a(""),g(null),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),console.log(e.t0);case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(){return e.apply(this,arguments)}}(),w=function(){var e=(0,p.Z)((0,f.Z)().mark((function e(t){var s;return(0,f.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),(s=new FileReader).onload=function(){var e=(0,p.Z)((0,f.Z)().mark((function e(t){var s;return(0,f.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s=t.target.result,console.log(s),g(s);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),s.readAsDataURL(t.target.files[0]);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,k.jsxs)("div",{children:[(0,k.jsx)("form",{className:v,children:(0,k.jsxs)("div",{children:[!!c&&(0,k.jsx)("img",{className:_,src:c,alt:""}),(0,k.jsx)("input",{className:x,placeholder:o("myPosts.createPost"),value:s,onChange:function(e){return a(e.target.value)}})]})}),(0,k.jsx)("button",{onClick:N,className:P,children:o("myPosts.send")}),(0,k.jsx)("input",{className:j,type:"file",onChange:w})]})},B=((0,S.Z)({form:"ProfileAddNewPostForm"})((function(e){var t=e.props,s=(0,D.$G)(),a=s.t,n=s.i18n;return(0,l.useEffect)((function(){var e=navigator.language;n.changeLanguage(e)}),[]),(0,k.jsxs)("form",{className:v,onSubmit:t.handleSubmit,children:[(0,k.jsx)("div",{children:(0,k.jsx)(w.Z,{className:x,name:"newPostText",component:Z.gx,placeholder:a("myPosts.createPost")})}),(0,k.jsx)("div",{children:(0,k.jsx)("button",{className:P,children:a("myPosts.send")})})]})})),L),E=(0,u.$j)((function(e){return{posts:e.profilePage.posts,newPostText:e.profilePage.newPostText}}),(function(e){return{addPost:function(t){e((0,c.Wl)(t))}}}))(B),G=s(6774),J="ProfileInfo_profileInfo__LrTnN",z="ProfileInfo_descriptionBlock__9Fw0F",T="ProfileInfo_mainPhoto__Rg+rA",U="ProfileInfo_wallpaper__BoAoz",$="ProfileInfo_profileData__9bE5l",O="ProfileInfo_name__C0wlm",H="ProfileInfo_spanInfo__lbvRp",R="ProfileInfo_changePhoto__ZUsbN",V="ProfileInfo_Btn__XHMLr",X="ProfileInfo_svg__Jk2uF",q="ProfileStatus_inputStatus__Bt-lf",K="ProfileStatus_status__DaJgl",W=function(e){var t=(0,l.useState)(!1),s=(0,d.Z)(t,2),a=s[0],n=s[1],o=(0,l.useState)(e.status),r=(0,d.Z)(o,2),i=r[0],u=r[1];(0,l.useEffect)((function(){u(e.status)}),[e.status]);var c=(0,D.$G)(),f=c.t,p=c.i18n;(0,l.useEffect)((function(){var e=navigator.language;p.changeLanguage(e)}),[]);navigator.language;return(0,k.jsxs)("div",{className:K,children:[!a&&(0,k.jsxs)("div",{children:[(0,k.jsx)("b",{children:f("profileStatus.myStatus")}),(0,k.jsx)("span",{onDoubleClick:function(){n(!0)},children:e.status||" ---------"})]}),a&&(0,k.jsxs)("div",{children:[(0,k.jsx)("b",{children:f("profileStatus.myStatus")}),(0,k.jsx)("input",{onChange:function(e){u(e.currentTarget.value)},value:i,className:q,autoFocus:!0,onBlur:function(){n(!1),e.updateStatus(i)}})]})]})},Y=s(4353),Q="ProfileDataForm_formSave__pTnI6",ee="ProfileDataForm_spanInfo__mtt+U",te="ProfileDataForm_button2__x5n4F",se=(0,S.Z)({form:"edit-profile"})((function(e){var t=e.handleSubmit,s=(e.profile,(0,D.$G)()),a=s.t,n=s.i18n;(0,l.useEffect)((function(){var e=localStorage.getItem("lg");n.changeLanguage(e)}),[]);navigator.language;return(0,k.jsxs)("form",{className:Q,onSubmit:t,children:[(0,k.jsx)("div",{className:ee,children:a("ProfileDataForm.baseInfo")}),(0,k.jsxs)("div",{style:{marginBottom:"30px"},children:[(0,k.jsx)("b",{children:a("ProfileDataForm.fio")})," ",(0,Z.Gr)("\u0424\u0418\u041e","fullName",[],Z.II)]}),(0,k.jsxs)("div",{style:{marginBottom:"30px"},children:[(0,k.jsx)("b",{children:a("ProfileDataForm.lookingJob")})," ",(0,Z.Gr)("","lookingForAJob",[],Z.II,{type:"checkbox"})]}),(0,k.jsxs)("div",{style:{marginBottom:"30px"},children:[(0,k.jsx)("b",{children:a("ProfileDataForm.skill")}),(0,Z.Gr)("\u041c\u043e\u0438 \u043f\u0440\u043e\u0444\u0435\u0441\u0441\u0438\u043e\u043d\u0430\u043b\u044c\u043d\u044b\u0435 \u043d\u0430\u0432\u044b\u043a\u0438","lookingForAJobDescription",[],Z.II)]}),(0,k.jsxs)("div",{style:{marginBottom:"15px"},children:[(0,k.jsxs)("b",{children:[a("ProfileDataForm.aboutMe")," "]}),(0,Z.Gr)("\u041e\u0431\u043e \u043c\u043d\u0435","aboutMe",[],Z.II)]}),(0,k.jsx)("div",{children:(0,k.jsx)("button",{className:te,children:a("ProfileDataForm.save")})})]})})),ae=function(e){var t=e.profile,s=e.isOwner,a=e.goToEditMode,n=(0,D.$G)(),o=n.t,r=n.i18n;(0,l.useEffect)((function(){var e=localStorage.getItem("lg");r.changeLanguage(e)}),[]);navigator.language;return(0,k.jsxs)("div",{className:$,children:[(0,k.jsx)("div",{className:O,children:t.fullName}),(0,k.jsx)("div",{className:H,children:o("ProfileDataForm.baseInfo")}),(0,k.jsxs)("div",{style:{marginBottom:"30px"},children:[(0,k.jsx)("b",{children:o("ProfileDataForm.lookingJob")})," ",t.lookingForAJob?"+":"-"]}),t.lookingForAJob&&(0,k.jsxs)("div",{style:{marginBottom:"30px"},children:[(0,k.jsxs)("b",{children:[o("ProfileDataForm.skill")," "]})," ",t.lookingForAJobDescription]}),(0,k.jsxs)("div",{style:{marginBottom:"15px"},children:[(0,k.jsxs)("b",{children:[o("ProfileDataForm.aboutMe")," "]})," ",t.aboutMe]}),s&&(0,k.jsx)("div",{children:(0,k.jsxs)("button",{onClick:a,className:V,children:[o("changeYesNo.change"),(0,k.jsx)("svg",{className:X,viewBox:"0 0 512 512",children:(0,k.jsx)("path",{d:"M410.3 231l11.3-11.3-33.9-33.9-62.1-62.1L291.7 89.8l-11.3 11.3-22.6 22.6L58.6 322.9c-10.4 10.4-18 23.3-22.2 37.4L1 480.7c-2.5 8.4-.2 17.5 6.1 23.7s15.3 8.5 23.7 6.1l120.3-35.4c14.1-4.2 27-11.8 37.4-22.2L387.7 253.7 410.3 231zM160 399.4l-9.1 22.7c-4 3.1-8.5 5.4-13.3 6.9L59.4 452l23-78.1c1.4-4.9 3.8-9.4 6.9-13.3l22.7-9.1v32c0 8.8 7.2 16 16 16h32zM362.7 18.7L348.3 33.2 325.7 55.8 314.3 67.1l33.9 33.9 62.1 62.1 33.9 33.9 11.3-11.3 22.6-22.6 14.5-14.5c25-25 25-65.5 0-90.5L453.3 18.7c-25-25-65.5-25-90.5 0zm-47.4 168l-144 144c-6.2 6.2-16.4 6.2-22.6 0s-6.2-16.4 0-22.6l144-144c6.2-6.2 16.4-6.2 22.6 0s6.2 16.4 0 22.6z"})})]})})]})},ne=function(e){var t=e.profile,s=e.status,a=e.updateStatus,n=e.isOwner,o=e.savePhoto,r=e.saveProfile,i=(0,l.useState)(!1),u=(0,d.Z)(i,2),c=u[0],f=u[1];if(!t)return(0,k.jsx)(G.Z,{});return(0,k.jsxs)("div",{className:J,children:[(0,k.jsx)("img",{className:U,src:"https://wallpapercave.com/wp/wp8695009.jpg",alt:"wallpaper"}),(0,k.jsxs)("div",{className:z,children:[(0,k.jsx)("img",{alt:"",src:t.photos.large||Y,className:T}),n&&(0,k.jsx)("input",{className:R,type:"file",onChange:function(e){e.target.files[0]&&o(e.target.files[0])}}),(0,k.jsx)(W,{status:s,updateStatus:a}),c?(0,k.jsx)(se,{initialValues:t,profile:t,onSubmit:function(e){r(e),f(!1)}}):(0,k.jsx)(ae,{goToEditMode:function(){f(!0)},profile:t,isOwner:n})]})]})},oe=function(e){var t=(0,D.$G)().i18n,s=(0,l.useContext)(C.I),a=s.loginPostData,n=s.myId;return(0,l.useEffect)((function(){e.isOwner?a(n,!0):a(n,!1);var s=localStorage.getItem("lg");t.changeLanguage(s)}),[]),(0,k.jsxs)("div",{children:[(0,k.jsx)(ne,{savePhoto:e.savePhoto,isOwner:e.isOwner,profile:e.profile,status:e.status,saveProfile:e.saveProfile,updateStatus:e.updateStatus}),(0,k.jsx)(E,{})]})},re=s(7689),ie=s(2291),le=s(7781),ue=function(e){(0,r.Z)(s,e);var t=(0,i.Z)(s);function s(){return(0,n.Z)(this,s),t.apply(this,arguments)}return(0,o.Z)(s,[{key:"refreshProfile",value:function(){var e=this.props.router.params.userId;e||(e=this.props.authorizedUserId)||this.props.history.push("/login"),this.props.getUserProfile(e),this.props.getStatus(e)}},{key:"componentDidMount",value:function(){this.refreshProfile()}},{key:"componentDidUpdate",value:function(e,t,s){this.props.router.params.userId!==e.router.params.userId&&this.refreshProfile()}},{key:"render",value:function(){return(0,k.jsx)(oe,(0,a.Z)((0,a.Z)({},this.props),{},{isOwner:!this.props.router.params.userId,profile:this.props.profile,status:this.props.status,updateStatus:this.props.updateStatus,savePhoto:this.props.savePhoto}))}}]),s}(l.Component),ce=(0,le.qC)((0,u.$j)((function(e){return{profile:e.profilePage.profile,status:e.profilePage.status,authorizedUserId:e.auth.userId,isAuth:e.auth.isAuth}}),{getUserProfile:c.et,getStatus:c.lR,updateStatus:c.Nf,savePhoto:c.Ju,saveProfile:c.Ii}),(function(e){return function(t){var s=(0,re.TH)(),n=(0,re.s0)(),o=(0,re.UO)();return(0,k.jsx)(e,(0,a.Z)((0,a.Z)({},t),{},{router:{location:s,navigate:n,params:o}}))}}),ie.S)(ue)}}]);
//# sourceMappingURL=666.79902c50.chunk.js.map